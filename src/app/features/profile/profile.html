<div class=" bg-[#f2f2f2] px-4 py-8">
    <div class="max-w-3xl mx-auto space-y-6">
        <div class="flex items-center justify-between gap-4">
            <div>
                <p class="text-xs font-medium text-primary uppercase tracking-wide">
                    Configuración
                </p>
                <h1 class="text-2xl font-bold text-foreground">
                    Mi perfil
                </h1>
                <p class="text-sm text-foreground/70 mt-1">
                    Actualiza tus datos personales y de contacto.
                </p>
            </div>

            <a
                    routerLink="/dashboard"
                    class="text-xs font-medium text-primary hover:underline"
            >
                Volver al dashboard
            </a>
        </div>

        <div
                class="bg-white rounded-2xl max-w-md  mx-auto shadow-lg shadow-foreground/5 border border-primary/10 p-6 sm:p-8"
        >
            <form
                    [formGroup]="profileForm"
                    (ngSubmit)="onSubmit()"
                    class="space-y-4"
            >
                <div class="flex flex-col gap-1.5">
                    <label class="text-sm font-medium text-foreground" for="name">
                        Nombre
                    </label>
                    <input
                            id="name"
                            type="text"
                            formControlName="name"
                            class="w-full rounded-xl border border-foreground/10 bg-[#f9fafb] px-3 py-2.5 text-sm text-foreground outline-none
                   focus:border-primary focus:ring-2 focus:ring-primary/20 transition"
                            placeholder="Tu nombre"
                    />
                    <p
                            *ngIf="name?.touched && name?.invalid"
                            class="text-xs text-red-500 mt-1"
                    >
            <span *ngIf="name?.errors?.['required']">
              El nombre es obligatorio.
            </span>
                        <span *ngIf="name?.errors?.['minlength']">
              El nombre debe tener al menos 3 caracteres.
            </span>
                    </p>
                </div>
                <div class="flex flex-col gap-1.5">
                    <label class="text-sm font-medium text-foreground" for="lastName">
                        Apellido
                    </label>
                    <input
                            id="lastName"
                            type="text"
                            formControlName="lastName"
                            class="w-full rounded-xl border border-foreground/10 bg-[#f9fafb] px-3 py-2.5 text-sm text-foreground outline-none
                   focus:border-primary focus:ring-2 focus:ring-primary/20 transition"
                            placeholder="Tu apellido"
                    />
                    <p
                            *ngIf="lastName?.touched && lastName?.invalid"
                            class="text-xs text-red-500 mt-1"
                    >
            <span *ngIf="lastName?.errors?.['required']">
              El apellido es obligatorio.
            </span>
                        <span *ngIf="lastName?.errors?.['minlength']">
              El apellido debe tener al menos 3 caracteres.
            </span>
                    </p>
                </div>
                <div class="flex flex-col gap-1.5">
                    <label class="text-sm font-medium text-foreground" for="email">
                        Correo electrónico
                    </label>
                    <input
                            id="email"
                            type="email"
                            formControlName="email"
                            class="w-full rounded-xl border border-foreground/10 bg-[#f9fafb] px-3 py-2.5 text-sm text-foreground outline-none
                   focus:border-primary focus:ring-2 focus:ring-primary/20 transition"
                            placeholder="tucorreo@medireserva.cl"
                    />
                    <p
                            *ngIf="email?.touched && email?.invalid"
                            class="text-xs text-red-500 mt-1"
                    >
            <span *ngIf="email?.errors?.['required']">
              El correo es obligatorio.
            </span>
                        <span *ngIf="email?.errors?.['email']">
              Ingresa un correo válido.
            </span>
                    </p>
                </div>
                <div class="flex flex-col gap-1.5">
                    <label class="text-sm font-medium text-foreground" for="password">
                        Nueva contraseña
                    </label>
                    <input
                            id="password"
                            type="password"
                            formControlName="password"
                            class="w-full rounded-xl border border-foreground/10 bg-[#f9fafb] px-3 py-2.5 text-sm text-foreground outline-none
                   focus:border-primary focus:ring-2 focus:ring-primary/20 transition"
                            placeholder="Deja en blanco para no cambiarla"
                    />
                    <p class="text-[11px] text-foreground/50 mt-1">
                        Este campo es opcional.
                    </p>
                    <div
                            *ngIf="password?.touched && password?.errors?.['invalidPassword']"
                            class="text-xs text-red-500 mt-1"
                    >
                        La contraseña debe tener:
                    <ol class="list-disc list-inside mt-1">
                    <li>Una mayúscula</li>
                    <li>Una minúscula</li>
                    <li>Un número</li>
                    <li>Un símbolo</li>
                    </ol>
                    </div>
                </div>
                <div class="flex flex-col gap-1.5">
                    <label class="text-sm font-medium text-foreground" for="password">
                        Repetir contraseña
                    </label>
                    <input
                            id="passwordRepeat"
                            type="password"
                            formControlName="passwordRepeat"
                            class="w-full rounded-xl border border-foreground/10 bg-[#f9fafb] px-3 py-2.5 text-sm text-foreground outline-none
                   focus:border-primary focus:ring-2 focus:ring-primary/20 transition"
                            placeholder="Deja en blanco para no cambiarla"
                    />
                    <span *ngIf="passwordRepeat?.errors?.['invalidRepeatPassword']"  class="text-xs text-red-500 mt-1">
              Las contraseñas no coinciden
            </span>
                </div>

                <div class="pt-2 flex items-center justify-between gap-4">
                    <button
                            type="submit"
                            [disabled]="profileForm.invalid"
                            class="inline-flex items-center justify-center gap-2 rounded-xl
                   bg-gradient-to-r from-primary to-accent
                   px-4 py-2.5 text-sm font-semibold text-white shadow-md shadow-primary/30
                   hover:shadow-lg hover:brightness-105 active:scale-[0.99] transition
                   disabled:opacity-60 disabled:cursor-not-allowed"
                    >
                        <span >Guardar cambios</span>
                    </button>

                    <p *ngIf="saveMessage" class="text-xs text-primary">
                        {{ saveMessage }}
                    </p>
                </div>
            </form>
        </div>
    </div>
</div>
